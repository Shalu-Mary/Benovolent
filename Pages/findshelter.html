<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Find Shelter - Benevolent Beginnings</title>
        <link rel="stylesheet" href="Styles/findshelter.css">
        <style>
            /* Map styles */
            #map-container {
                width: 100%;
                height: 400px;
                margin: 20px 0;
                border-radius: 8px;
                overflow: hidden;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }
            #map {
                width: 100%;
                height: 100%;
            }
            .info-window {
                padding: 5px;
                max-width: 200px;
            }
            .info-window h3 {
                margin-top: 0;
                color: #3d8b40;
                font-size: 16px;
            }
            .info-window p {
                margin: 5px 0;
                font-size: 14px;
            }
            .info-window .directions {
                display: inline-block;
                background-color: #3d8b40;
                color: white;
                padding: 5px 10px;
                border-radius: 4px;
                text-decoration: none;
                margin-top: 8px;
                font-size: 12px;
                text-align: center;
            }
        </style>
    </head>
<body>
    <header>
        <nav>
            <div class="logo-container">
                <img src="../Assets/logo-removebg-preview.png" alt="Benevolent Beginnings Logo">
                <h1>Benevolent Beginnings</h1>
            </div>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About Us</a></li>
                <li><a href="services.html">Services</a></li>
                <li><a href="Stats.html">Stats</a></li>
                <li><a href="chatbot.html">Support Chat</a></li>
                <li><a href="../Login/login.html">Login</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h2>Find Shelter & Support</h2>
            <p>Connecting you with safe havens and vital resources when you need them most.</p>
        </div>
    </section>

    <!-- Main Content -->
    <main>
        <section id="references">
            <div class="container">
                <h2>Available Resources</h2>
                
                <!-- Map replaces the image -->
                <div id="map-container">
                    <div id="map"></div>
                </div>
                
                <!-- Filter Controls -->
                <div class="filter-controls">
                    <div>
                        <label for="type-filter">Filter by Type:</label>
                        <select id="type-filter">
                            <option value="all">All Types</option>
                            <option value="Shelter">Shelter</option>
                            <option value="Hospital">Hospital</option>
                            <option value="Clinic">Clinic</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="location-filter">Filter by Location:</label>
                        <select id="location-filter">
                            <option value="all">All Locations</option>
                            <option value="Kochi">Kochi</option>
                            <option value="Kannur">Kannur</option>
                            <option value="Mumbai">Mumbai</option>
                            <option value="Trivandrum">Trivandrum</option>
                            <option value="Chennai">Chennai</option>
                            <option value="Bangalore">Bangalore</option>
                            <option value="Kolkata">Kolkata</option>
                        </select>
                    </div>
                    
                    <button id="reset-filters">Reset Filters</button>
                </div>
                
                <!-- Table -->
                <div class="table-container">
                    <table id="resources-table">
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>Name</th>
                                <th>Location</th>
                                <th>Contact</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Shelter</td>
                                <td>Hope Shelter</td>
                                <td>Kochi</td>
                                <td><a href="tel:9834512912" class="contact-link">9834512912</a></td>
                            </tr>
                            <tr>
                                <td>Hospital</td>
                                <td>Animal Hospital</td>
                                <td>Kannur</td>
                                <td><a href="tel:8734569213" class="contact-link">8734569213</a></td>
                            </tr>
                            <tr>
                                <td>Clinic</td>
                                <td>City Clinic</td>
                                <td>Mumbai</td>
                                <td><a href="tel:7893521875" class="contact-link">7893521875</a></td>
                            </tr>
                            <tr>
                                <td>Shelter</td>
                                <td>Paws Haven</td>
                                <td>Trivandrum</td>
                                <td><a href="tel:9854812002" class="contact-link">9854812002</a></td>
                            </tr>
                            <tr>
                                <td>Hospital</td>
                                <td>Pet Hospital</td>
                                <td>Chennai</td>
                                <td><a href="tel:9453782315" class="contact-link">9453782315</a></td>
                            </tr>
                            <tr>
                                <td>Clinic</td>
                                <td>Town Clinic</td>
                                <td>Selam</td>
                                <td><a href="tel:7893450132" class="contact-link">7893450132</a></td>
                            </tr>
                            <tr>
                                <td>Shelter</td>
                                <td>Kindred Hearts</td>
                                <td>Bangalore</td>
                                <td><a href="tel:9834672381" class="contact-link">9834672381</a></td>
                            </tr>
                            <tr>
                                <td>Hospital</td>
                                <td>Vet Clinic</td>
                                <td>Wayanad</td>
                                <td><a href="tel:9876543210" class="contact-link">9876543210</a></td>
                            </tr>
                            <tr>
                                <td>Clinic</td>
                                <td>Local Clinic</td>
                                <td>Kolkata</td>
                                <td><a href="tel:9411144796" class="contact-link">9411144796</a></td>
                            </tr>
                            <tr>
                                <td>Shelter</td>
                                <td>Safe Haven</td>
                                <td>Madurai</td>
                                <td><a href="tel:8711002741" class="contact-link">8711002741</a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Benevolent Beginnings - All Rights Reserved</p>
    </footer>

    <script>
        // Resource locations with coordinates
        const resources = [
            {
                type: "Shelter",
                name: "Hope Shelter",
                location: "Kochi",
                contact: "9834512912",
                lat: 9.9312,
                lng: 76.2673
            },
            {
                type: "Hospital",
                name: "Animal Hospital",
                location: "Kannur",
                contact: "8734569213",
                lat: 11.8745,
                lng: 75.3704
            },
            {
                type: "Clinic",
                name: "City Clinic",
                location: "Mumbai",
                contact: "7893521875",
                lat: 19.0760,
                lng: 72.8777
            },
            {
                type: "Shelter",
                name: "Paws Haven",
                location: "Trivandrum",
                contact: "9854812002",
                lat: 8.5241,
                lng: 76.9366
            },
            {
                type: "Hospital",
                name: "Pet Hospital",
                location: "Chennai",
                contact: "9453782315",
                lat: 13.0827,
                lng: 80.2707
            },
            {
                type: "Clinic",
                name: "Town Clinic",
                location: "Selam",
                contact: "7893450132",
                lat: 11.6643,
                lng: 78.1460
            },
            {
                type: "Shelter",
                name: "Kindred Hearts",
                location: "Bangalore",
                contact: "9834672381",
                lat: 12.9716,
                lng: 77.5946
            },
            {
                type: "Hospital",
                name: "Vet Clinic",
                location: "Wayanad",
                contact: "9876543210",
                lat: 11.6854,
                lng: 76.1320
            },
            {
                type: "Clinic",
                name: "Local Clinic",
                location: "Kolkata",
                contact: "9411144796",
                lat: 22.5726,
                lng: 88.3639
            },
            {
                type: "Shelter",
                name: "Safe Haven",
                location: "Madurai",
                contact: "8711002741",
                lat: 9.9252,
                lng: 78.1198
            }
        ];

        let map;
        let markers = [];
        let infoWindow;

        // Initialize Google Maps
        function initMap() {
            // Center on India
            const india = { lat: 20.5937, lng: 78.9629 };
            
            map = new google.maps.Map(document.getElementById("map"), {
                zoom: 5,
                center: india,
                mapTypeControl: true,
                streetViewControl: false,
                fullscreenControl: true,
                zoomControl: true,
            });

            infoWindow = new google.maps.InfoWindow();
            
            // Add markers for all resources
            addMarkers(resources);
            
            // Setup filter functionality after map is initialized
            setupFilters();
        }

        // Add markers to the map
        function addMarkers(resources) {
            // Clear existing markers
            clearMarkers();
            
            // Add new markers
            resources.forEach(resource => {
                const marker = new google.maps.Marker({
                    position: { lat: resource.lat, lng: resource.lng },
                    map: map,
                    title: resource.name,
                    // Different icons for different types
                    icon: getMarkerIcon(resource.type)
                });
                
                // Add click event to open info window
                marker.addListener("click", () => {
                    const content = `
                        <div class="info-window">
                            <h3>${resource.name}</h3>
                            <p><strong>Type:</strong> ${resource.type}</p>
                            <p><strong>Location:</strong> ${resource.location}</p>
                            <p><strong>Contact:</strong> ${resource.contact}</p>
                            <a href="https://www.google.com/maps/dir/?api=1&destination=${resource.lat},${resource.lng}" 
                               class="directions" target="_blank">Get Directions</a>
                        </div>
                    `;
                    
                    infoWindow.setContent(content);
                    infoWindow.open(map, marker);
                });
                
                markers.push(marker);
            });
            
            // If there are markers, fit bounds to show all of them
            if (markers.length > 0) {
                const bounds = new google.maps.LatLngBounds();
                markers.forEach(marker => bounds.extend(marker.getPosition()));
                map.fitBounds(bounds);
                
                // Don't zoom in too far
                const listener = google.maps.event.addListener(map, "idle", () => {
                    if (map.getZoom() > 12) map.setZoom(12);
                    google.maps.event.removeListener(listener);
                });
            }
        }
        
        // Get marker icon based on type
        function getMarkerIcon(type) {
            switch(type) {
                case 'Shelter':
                    return {
                        url: "http://maps.google.com/mapfiles/ms/icons/blue-dot.png"
                    };
                case 'Hospital':
                    return {
                        url: "http://maps.google.com/mapfiles/ms/icons/red-dot.png"
                    };
                case 'Clinic':
                    return {
                        url: "http://maps.google.com/mapfiles/ms/icons/green-dot.png"
                    };
                default:
                    return null;
            }
        }
        
        // Clear all markers from the map
        function clearMarkers() {
            markers.forEach(marker => marker.setMap(null));
            markers = [];
        }
        
        // Setup filter functionality
        function setupFilters() {
            const typeFilter = document.getElementById('type-filter');
            const locationFilter = document.getElementById('location-filter');
            const resetButton = document.getElementById('reset-filters');
            const table = document.getElementById('resources-table');
            const rows = table.querySelectorAll('tbody tr');
            
            function applyFilters() {
                const typeValue = typeFilter.value;
                const locationValue = locationFilter.value;
                
                // Filter table rows
                rows.forEach(row => {
                    const type = row.cells[0].textContent;
                    const location = row.cells[2].textContent;
                    
                    const typeMatch = typeValue === 'all' || type === typeValue;
                    const locationMatch = locationValue === 'all' || location === locationValue;
                    
                    if (typeMatch && locationMatch) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
                
                // Filter map markers
                const filteredResources = resources.filter(resource => {
                    const typeMatch = typeValue === 'all' || resource.type === typeValue;
                    const locationMatch = locationValue === 'all' || resource.location === locationValue;
                    return typeMatch && locationMatch;
                });
                
                // Update map with filtered resources
                addMarkers(filteredResources);
            }
            
            typeFilter.addEventListener('change', applyFilters);
            locationFilter.addEventListener('change', applyFilters);
            
            resetButton.addEventListener('click', function() {
                typeFilter.value = 'all';
                locationFilter.value = 'all';
                rows.forEach(row => row.style.display = '');
                addMarkers(resources);
            });
        }
        
        // Load Google Maps API script after page content is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Create and load the Google Maps script
            const script = document.createElement('script');
            script.src = "https://maps.googleapis.com/maps/api/js?key=AIzaSyDcnEMLWqK7p9UE1edyc_NxaKDaxq_bNZQ&callback=initMap";
            script.async = true;
            script.defer = true;
            document.head.appendChild(script);
        });
    </script>
</body>
</html>